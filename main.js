(()=>{"use strict";var t={56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},72:t=>{var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var o={},s=[],a=0;a<t.length;a++){var l=t[a],c=i.base?l[0]+i.base:l[0],d=o[c]||0,u="".concat(c," ").concat(d);o[c]=d+1;var h=n(u),m={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)e[h].references++,e[h].updater(m);else{var p=r(m,i);i.byIndex=a,e.splice(a,0,{identifier:u,updater:p,references:1})}s.push(u)}return s}function r(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var o=i(t=t||[],r=r||{});return function(t){t=t||[];for(var s=0;s<o.length;s++){var a=n(o[s]);e[a].references--}for(var l=i(t,r),c=0;c<o.length;c++){var d=n(o[c]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}o=l}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},208:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),o=n(314),s=n.n(o)()(r());s.push([t.id,"/* контейнер под все пространство игры */\n.container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 40px;\n}\n\n/* доска */\n.board {\n  display: grid;\n  grid-template-columns: repeat(4, 100px);\n  grid-template-rows: repeat(4, 100px);\n  gap: 8px;\n  margin: 24px;\n}\n\n.cell {\n  width: 100px;\n  height: 100px;\n  background: #e8e8e8;\n  border-radius: 8px;\n  display: grid;\n  place-items: center;\n  user-select: none;\n}\n\n/* заголовок */\nh1 {\n  font-family: Arial, sans-serif;\n  font-size: 18px;\n  text-align: center;\n  margin-bottom: 20px;\n}\n\n/* условие игры */\n.rules {\n  font-family: Arial, sans-serif;\n  font-size: 15px;\n  color: #222;\n  text-align: center;\n  margin-top: 20px;\n  padding: 10px 20px;\n  border: 2px dashed #444;\n  border-radius: 8px;\n  display: inline-block;\n  background-color: #f9f9f9; \n}\n\n.hud {\n  display: flex;\n  gap: 24px;\n  justify-content: center;\n  margin: 8px 0 16px;\n  font: 16px/1.2 Arial, sans-serif;\n}\n\n.modal.hidden { display: none; }\n\n.modal {\n  position: fixed; inset: 0;\n  background: rgba(0,0,0,.5);\n  display: grid; place-items: center;\n  z-index: 1000;\n}\n.modal__card {\n  background: #fff; color: #222;\n  padding: 20px 24px; border-radius: 12px;\n  min-width: 260px;\n  text-align: center;\n}\n.modal__card button {\n  margin-top: 12px; padding: 8px 14px;\n  border: 0; border-radius: 8px;\n  background: #222; color: #fff; cursor: pointer;\n}\n\n#modal-title {\n  font-family: Arial, sans-serif;\n  font-size: 20px;\n  font-weight: bold;\n  margin-bottom: 10px;\n}\n\n#modal-text {\n  font-family: Arial, sans-serif;\n  font-size: 16px;\n  margin-bottom: 15px;\n}\n\n/* гоблин */\n.goblin {\n  width: 80px;\n  height: 80px;\n  pointer-events: none;\n  user-select: none;\n}\n\n/* молоток */\n:root {\n  --hammer-size: 50px; \n  --hx: 40px;            /* смещение по X */\n  --hy: 10px;            /* смещение по Y */\n}\n\nbody {\n  cursor: none;\n  margin: 0;\n}\n\n.hammer {\n  position: fixed;\n  height: var(--hammer-size);\n  z-index: 999;\n  transform: translate(calc(-1 * var(--hx)), calc(-1 * var(--hy)));\n  pointer-events: none;\n}\n\n.hammer.hit {\n  animation: hit-effect 0.15s ease;\n}\n\n@keyframes hit-effect {\n  from { transform: translate(calc(-1 * var(--hx)), calc(-1 * var(--hy))) rotate(0deg); }\n  to   { transform: translate(calc(-1 * var(--hx)), calc(-1 * var(--hy))) rotate(-40deg); }\n}\n\n",""]);const a=s},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n}).join("")},e.i=function(t,n,i,r,o){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var c=0;c<t.length;c++){var d=[].concat(t[c]);i&&s[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),e.push(d))}},e}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},601:t=>{t.exports=function(t){return t[1]}},659:t=>{var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={id:i,exports:{}};return t[i](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=i[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n.nc=void 0;var i=n(72),r=n.n(i),o=n(825),s=n.n(o),a=n(659),l=n.n(a),c=n(56),d=n.n(c),u=n(540),h=n.n(u),m=n(113),p=n.n(m),f=n(208),v={};function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function b(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,g(i.key),i)}}function g(t){var e=function(t){if("object"!=y(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==y(e)?e:e+""}v.styleTagTransform=p(),v.setAttributes=d(),v.insert=l().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=h(),r()(f.A,v),f.A&&f.A.locals&&f.A.locals;var x=function(){return t=function t(e){var n=e.mount,i=e.rows,r=void 0===i?4:i,o=e.cols,s=void 0===o?4:o,a=e.imgSrc,l=e.imgAlt,c=void 0===l?"Гоблин":l;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mount=n,this.rows=r,this.cols=s,this.imgSrc=a,this.imgAlt=c,this.boardEl=null,this.cells=[],this.goblinEl=null},e=[{key:"setup",value:function(){var t=document.createElement("div");t.className="board",this.mount.append(t),this.boardEl=t;for(var e=document.createDocumentFragment(),n=0;n<this.rows*this.cols;n+=1){var i=document.createElement("div");i.className="cell",e.append(i),this.cells.push(i)}t.append(e);var r=document.createElement("img");r.className="goblin",r.src=this.imgSrc,r.alt=this.imgAlt,r.draggable=!1,this.goblinEl=r}},{key:"showAt",value:function(t){this.cells[t].append(this.goblinEl)}},{key:"removeGoblin",value:function(){var t;null===(t=this.goblinEl)||void 0===t||t.remove()}},{key:"cellCount",value:function(){return this.cells.length}},{key:"cellFromEvent",value:function(t){return t.target.closest(".cell")}}],e&&b(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function E(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,k(i.key),i)}}function k(t){var e=function(t){if("object"!=w(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==w(e)?e:e+""}var S=function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.rows,i=void 0===n?4:n,r=e.cols,o=void 0===r?4:r,s=e.imgSrc,a=e.imgAlt,l=void 0===a?"Гоблин":a,c=e.interval,d=void 0===c?1e3:c,u=e.rng,h=void 0===u?Math.random:u,m=e.winHits,p=void 0===m?10:m,f=e.maxMisses,v=void 0===f?5:f,y=e.mount,b=void 0===y?document.getElementById("game-root")||document.body:y;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.intervalMs=d,this.rng=h,this.board=new x({mount:b,rows:i,cols:o,imgSrc:s,imgAlt:l}),this.currentIndex=-1,this.roundActive=!1,this.isOver=!1,this.timerId=null,this.hits=0,this.misses=0,this.winHits=p,this.maxMisses=v,this.hitsEl=document.getElementById("hits"),this.missesEl=document.getElementById("misses"),this.modal=document.getElementById("modal"),this.modalTitle=document.getElementById("modal-title"),this.modalText=document.getElementById("modal-text"),this.modalBtn=document.getElementById("modal-btn"),this.onBoardClick=this.onBoardClick.bind(this),this.onModalBtn=this.onModalBtn.bind(this)},e=[{key:"init",value:function(){var t;this.board.setup(),this.board.boardEl.addEventListener("click",this.onBoardClick),null===(t=this.modalBtn)||void 0===t||t.addEventListener("click",this.onModalBtn),this.updateHud()}},{key:"cancelTimer",value:function(){this.timerId&&(clearTimeout(this.timerId),this.timerId=null)}},{key:"stop",value:function(){this.cancelTimer(),this.roundActive=!1}},{key:"start",value:function(){this.board.boardEl||this.init(),this.timerId||(this.isOver=!1,this.scheduleNextSpawn(0))}},{key:"scheduleNextSpawn",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.intervalMs;this.cancelTimer(),this.timerId=setTimeout(function(){t.isOver||(t.spawn(),t.scheduleNextSpawn())},e)}},{key:"spawn",value:function(){if(!(this.isOver||this.roundActive&&(this.misses+=1,this.updateHud(),this.checkLose()))){var t=this.nextIndex();this.board.showAt(t),this.currentIndex=t,this.roundActive=!0}}},{key:"nextIndex",value:function(){var t=this.board.cellCount();if(t<=1)return 0;if(this.currentIndex<0)return Math.floor(this.rng()*t);var e=Math.floor(this.rng()*(t-1))+1;return(this.currentIndex+e)%t}},{key:"onBoardClick",value:function(t){if(!this.isOver){var e=this.board.cellFromEvent(t);if(e){var n=this.board.goblinEl;if(n&&n.parentElement===e&&this.roundActive){if(this.hits+=1,this.roundActive=!1,this.board.removeGoblin(),this.updateHud(),this.checkWin())return;this.scheduleNextSpawn(0)}else this.misses+=1,this.updateHud(),this.checkLose()}}}},{key:"updateHud",value:function(){this.hitsEl&&(this.hitsEl.textContent=String(this.hits)),this.missesEl&&(this.missesEl.textContent=String(this.misses))}},{key:"checkWin",value:function(){return this.hits>=this.winHits&&(this.endGame(!0),!0)}},{key:"checkLose",value:function(){return this.misses>=this.maxMisses&&(this.endGame(!1),!0)}},{key:"endGame",value:function(t){this.isOver=!0,this.stop(),this.board.removeGoblin();var e=t?"Ты спас человечество! 🎉":"Гоблины вырвались на свободу и наступила эра порабощения 😢",n="Итог: попаданий - ".concat(this.hits,", промахов - ").concat(this.misses,".");this.openModal(e,n)}},{key:"openModal",value:function(t,e){this.modal&&(this.modalTitle.textContent=t,this.modalText.textContent=e,this.modal.classList.remove("hidden"))}},{key:"onModalBtn",value:function(){this.modal.classList.add("hidden"),this.hits=0,this.misses=0,this.currentIndex=-1,this.roundActive=!1,this.isOver=!1,this.updateHud(),this.scheduleNextSpawn(0)}},{key:"destroy",value:function(){var t,e,n;this.stop(),null!==(t=this.board)&&void 0!==t&&t.boardEl&&this.board.boardEl.removeEventListener("click",this.onBoardClick),this.modalBtn&&this.modalBtn.removeEventListener("click",this.onModalBtn),null===(e=this.board)||void 0===e||null===(n=e.removeGoblin)||void 0===n||n.call(e)}}],e&&E(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();const A=n.p+"2dbd01ce16c0fa83cb67.png",I=n.p+"4456fdca039007212cff.png";var T,C;window.__goblinGame&&(null===(T=(C=window.__goblinGame).destroy)||void 0===T||T.call(C));var B=new S({mount:document.getElementById("game-root")||document.body,rows:4,cols:4,imgSrc:A,interval:1e3});window.__goblinGame=B,B.start();var M=document.createElement("img");M.src=I,M.classList.add("hammer"),M.draggable=!1,document.body.appendChild(M),document.addEventListener("mousemove",function(t){M.style.left="".concat(t.clientX,"px"),M.style.top="".concat(t.clientY,"px")}),document.addEventListener("mousedown",function(){return M.classList.add("hit")}),document.addEventListener("mouseup",function(){return M.classList.remove("hit")})})();